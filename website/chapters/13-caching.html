<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 13-caching: Caching - Laravel: From Zero to Production</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <link href="../styles.css" rel="stylesheet">
    <style>
        .markdown-content {
            line-height: 1.8;
            font-size: 1.1rem;
        }
        .markdown-content h1 {
            color: #ff2d20;
            border-bottom: 3px solid #ff2d20;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        .markdown-content h2 {
            color: #636b6f;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        .markdown-content h3 {
            color: #495057;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .markdown-content h4 {
            color: #6c757d;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        .markdown-content p {
            margin-bottom: 1.2rem;
        }
        .markdown-content ul, .markdown-content ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }
        .markdown-content li {
            margin-bottom: 0.5rem;
        }
        .markdown-content code {
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        .markdown-content pre {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            margin: 20px 0;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
            border-radius: 0;
        }
        .markdown-content blockquote {
            border-left: 4px solid #ff2d20;
            margin: 20px 0;
            padding: 15px 20px;
            background-color: #f8f9fa;
            font-style: italic;
        }
        .markdown-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        .markdown-content th, .markdown-content td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .markdown-content th {
            background-color: #ff2d20;
            color: white;
            font-weight: bold;
        }
        .markdown-content tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .markdown-content strong {
            font-weight: 600;
            color: #495057;
        }
        .markdown-content em {
            color: #6c757d;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <i class="fab fa-laravel"></i> Laravel Book
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#chapters">Chapters</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#projects">Projects</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Chapter Content -->
    <div class="container mt-5 pt-5">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="../index.html">Home</a></li>
                        <li class="breadcrumb-item"><a href="../index.html#chapters">Chapters</a></li>
                        <li class="breadcrumb-item active">Chapter 13-caching: Caching</li>
                    </ol>
                </nav>

                <article class="chapter-content">
                    <h1 class="display-4 text-gradient mb-4">
                        <i class="fas fa-bolt"></i> Chapter 13-caching: Caching
                    </h1>
                    
                    
        <div class="markdown-content">
            <h1 id="caching">Caching</h1>
<h2 id="overview">Overview</h2>
<p>Caching is essential for improving application performance. Laravel provides a powerful caching system that supports multiple cache drivers and offers various caching strategies. This chapter covers everything you need to know about implementing effective caching in your Laravel applications.</p>
<h2 id="what-is-caching">What is Caching?</h2>
<p>Caching is the process of storing frequently accessed data in memory or fast storage to reduce response times and server load. Laravel's caching system provides a unified API for working with different cache backends.</p>
<h2 id="cache-drivers">Cache Drivers</h2>
<p>Laravel supports multiple cache drivers, each with different characteristics:</p>
<h3 id="available-drivers">Available Drivers</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// config/cache.php</span>
<span class="x">&#39;default&#39; =&gt; env(&#39;CACHE_DRIVER&#39;, &#39;file&#39;),</span>

<span class="x">&#39;stores&#39; =&gt; [</span>
<span class="x">    &#39;apc&#39; =&gt; [</span>
<span class="x">        &#39;driver&#39; =&gt; &#39;apc&#39;,</span>
<span class="x">    ],</span>
<span class="x">    &#39;array&#39; =&gt; [</span>
<span class="x">        &#39;driver&#39; =&gt; &#39;array&#39;,</span>
<span class="x">    ],</span>
<span class="x">    &#39;file&#39; =&gt; [</span>
<span class="x">        &#39;driver&#39; =&gt; &#39;file&#39;,</span>
<span class="x">        &#39;path&#39; =&gt; storage_path(&#39;framework/cache/data&#39;),</span>
<span class="x">    ],</span>
<span class="x">    &#39;redis&#39; =&gt; [</span>
<span class="x">        &#39;driver&#39; =&gt; &#39;redis&#39;,</span>
<span class="x">        &#39;connection&#39; =&gt; &#39;cache&#39;,</span>
<span class="x">    ],</span>
<span class="x">    &#39;memcached&#39; =&gt; [</span>
<span class="x">        &#39;driver&#39; =&gt; &#39;memcached&#39;,</span>
<span class="x">        &#39;persistent_id&#39; =&gt; env(&#39;MEMCACHED_PERSISTENT_ID&#39;),</span>
<span class="x">        &#39;sasl&#39; =&gt; [</span>
<span class="x">            env(&#39;MEMCACHED_USERNAME&#39;),</span>
<span class="x">            env(&#39;MEMCACHED_PASSWORD&#39;),</span>
<span class="x">        ],</span>
<span class="x">        &#39;options&#39; =&gt; [</span>
<span class="x">            // Memcached::OPT_CONNECT_TIMEOUT =&gt; 2000,</span>
<span class="x">        ],</span>
<span class="x">        &#39;servers&#39; =&gt; [</span>
<span class="x">            [</span>
<span class="x">                &#39;host&#39; =&gt; env(&#39;MEMCACHED_HOST&#39;, &#39;127.0.0.1&#39;),</span>
<span class="x">                &#39;port&#39; =&gt; env(&#39;MEMCACHED_PORT&#39;, 11211),</span>
<span class="x">                &#39;weight&#39; =&gt; 100,</span>
<span class="x">            ],</span>
<span class="x">        ],</span>
<span class="x">    ],</span>
<span class="x">],</span>
</code></pre></div>

<h3 id="driver-comparison">Driver Comparison</h3>
<table>
<thead>
<tr>
<th>Driver</th>
<th>Speed</th>
<th>Persistence</th>
<th>Memory Usage</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>Array</td>
<td>Fastest</td>
<td>No</td>
<td>High</td>
<td>Testing</td>
</tr>
<tr>
<td>File</td>
<td>Slow</td>
<td>Yes</td>
<td>Low</td>
<td>Development</td>
</tr>
<tr>
<td>Redis</td>
<td>Fast</td>
<td>Yes</td>
<td>Medium</td>
<td>Production</td>
</tr>
<tr>
<td>Memcached</td>
<td>Fast</td>
<td>No</td>
<td>Low</td>
<td>Production</td>
</tr>
<tr>
<td>APC</td>
<td>Fastest</td>
<td>No</td>
<td>High</td>
<td>Single Server</td>
</tr>
</tbody>
</table>
<h2 id="basic-caching-operations">Basic Caching Operations</h2>
<h3 id="storing-items">Storing Items</h3>
<div class="codehilite"><pre><span></span><code><span class="x">use Illuminate\Support\Facades\Cache;</span>

<span class="x">// Store a simple value</span>
<span class="x">Cache::put(&#39;key&#39;, &#39;value&#39;, $seconds = 60);</span>

<span class="x">// Store forever</span>
<span class="x">Cache::forever(&#39;key&#39;, &#39;value&#39;);</span>

<span class="x">// Store if not exists</span>
<span class="x">Cache::add(&#39;key&#39;, &#39;value&#39;, $seconds = 60);</span>

<span class="x">// Store with helper function</span>
<span class="x">cache([&#39;key&#39; =&gt; &#39;value&#39;], $seconds = 60);</span>
</code></pre></div>

<h3 id="retrieving-items">Retrieving Items</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Get value</span>
<span class="x">$value = Cache::get(&#39;key&#39;);</span>

<span class="x">// Get with default</span>
<span class="x">$value = Cache::get(&#39;key&#39;, &#39;default&#39;);</span>

<span class="x">// Get and delete</span>
<span class="x">$value = Cache::pull(&#39;key&#39;);</span>

<span class="x">// Check if exists</span>
<span class="x">if (Cache::has(&#39;key&#39;)) {</span>
<span class="x">    // Key exists</span>
<span class="x">}</span>

<span class="x">// Get multiple items</span>
<span class="x">$values = Cache::many([&#39;key1&#39;, &#39;key2&#39;, &#39;key3&#39;]);</span>
</code></pre></div>

<h3 id="removing-items">Removing Items</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Remove single item</span>
<span class="x">Cache::forget(&#39;key&#39;);</span>

<span class="x">// Remove multiple items</span>
<span class="x">Cache::forget([&#39;key1&#39;, &#39;key2&#39;]);</span>

<span class="x">// Clear all cache</span>
<span class="x">Cache::flush();</span>

<span class="x">// Remove by pattern (Redis only)</span>
<span class="x">Cache::flush(&#39;user:*&#39;);</span>
</code></pre></div>

<h2 id="cache-tags">Cache Tags</h2>
<p>Cache tags allow you to group related cache items and flush them together:</p>
<div class="codehilite"><pre><span></span><code><span class="x">// Store with tags</span>
<span class="x">Cache::tags([&#39;users&#39;, &#39;posts&#39;])-&gt;put(&#39;user_posts&#39;, $posts, 3600);</span>

<span class="x">// Retrieve with tags</span>
<span class="x">$posts = Cache::tags([&#39;users&#39;, &#39;posts&#39;])-&gt;get(&#39;user_posts&#39;);</span>

<span class="x">// Flush specific tags</span>
<span class="x">Cache::tags(&#39;users&#39;)-&gt;flush();</span>

<span class="x">// Flush multiple tags</span>
<span class="x">Cache::tags([&#39;users&#39;, &#39;posts&#39;])-&gt;flush();</span>
</code></pre></div>

<h2 id="cache-helpers">Cache Helpers</h2>
<h3 id="remember-pattern">Remember Pattern</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Remember pattern - get from cache or store</span>
<span class="x">$users = Cache::remember(&#39;users&#39;, 3600, function () {</span>
<span class="x">    return User::all();</span>
<span class="x">});</span>

<span class="x">// Remember forever</span>
<span class="x">$users = Cache::rememberForever(&#39;users&#39;, function () {</span>
<span class="x">    return User::all();</span>
<span class="x">});</span>

<span class="x">// Remember with tags</span>
<span class="x">$users = Cache::tags(&#39;users&#39;)-&gt;remember(&#39;all_users&#39;, 3600, function () {</span>
<span class="x">    return User::all();</span>
<span class="x">});</span>
</code></pre></div>

<h3 id="incrementdecrement">Increment/Decrement</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Increment counter</span>
<span class="x">Cache::increment(&#39;counter&#39;);</span>
<span class="x">Cache::increment(&#39;counter&#39;, 5);</span>

<span class="x">// Decrement counter</span>
<span class="x">Cache::decrement(&#39;counter&#39;);</span>
<span class="x">Cache::decrement(&#39;counter&#39;, 5);</span>
</code></pre></div>

<h2 id="model-caching">Model Caching</h2>
<h3 id="cache-model-queries">Cache Model Queries</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Cache query results</span>
<span class="x">$users = Cache::remember(&#39;users.active&#39;, 3600, function () {</span>
<span class="x">    return User::where(&#39;active&#39;, true)-&gt;get();</span>
<span class="x">});</span>

<span class="x">// Cache with model events</span>
<span class="x">class User extends Model</span>
<span class="x">{</span>
<span class="x">    protected static function boot()</span>
<span class="x">    {</span>
<span class="x">        parent::boot();</span>

<span class="x">        static::saved(function ($user) {</span>
<span class="x">            Cache::tags(&#39;users&#39;)-&gt;flush();</span>
<span class="x">        });</span>

<span class="x">        static::deleted(function ($user) {</span>
<span class="x">            Cache::tags(&#39;users&#39;)-&gt;flush();</span>
<span class="x">        });</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h3 id="cache-model-relationships">Cache Model Relationships</h3>
<div class="codehilite"><pre><span></span><code><span class="x">class User extends Model</span>
<span class="x">{</span>
<span class="x">    public function posts()</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;hasMany(Post::class);</span>
<span class="x">    }</span>

<span class="x">    public function getCachedPostsAttribute()</span>
<span class="x">    {</span>
<span class="x">        return Cache::remember(&quot;user.{$this-&gt;id}.posts&quot;, 3600, function () {</span>
<span class="x">            return $this-&gt;posts()-&gt;with(&#39;comments&#39;)-&gt;get();</span>
<span class="x">        });</span>
<span class="x">    }</span>
<span class="x">}</span>

<span class="x">// Usage</span>
<span class="x">$user = User::find(1);</span>
<span class="x">$posts = $user-&gt;cached_posts;</span>
</code></pre></div>

<h2 id="route-caching">Route Caching</h2>
<h3 id="cache-routes">Cache Routes</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Cache all routes</span>
php<span class="w"> </span>artisan<span class="w"> </span>route:cache

<span class="c1"># Clear route cache</span>
php<span class="w"> </span>artisan<span class="w"> </span>route:clear

<span class="c1"># List cached routes</span>
php<span class="w"> </span>artisan<span class="w"> </span>route:list
</code></pre></div>

<h3 id="cache-configuration">Cache Configuration</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Cache configuration</span>
php<span class="w"> </span>artisan<span class="w"> </span>config:cache

<span class="c1"># Clear config cache</span>
php<span class="w"> </span>artisan<span class="w"> </span>config:clear

<span class="c1"># Cache views</span>
php<span class="w"> </span>artisan<span class="w"> </span>view:cache

<span class="c1"># Clear view cache</span>
php<span class="w"> </span>artisan<span class="w"> </span>view:clear
</code></pre></div>

<h2 id="database-query-caching">Database Query Caching</h2>
<h3 id="cache-query-results">Cache Query Results</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Cache database queries</span>
<span class="x">$users = DB::table(&#39;users&#39;)</span>
<span class="x">    -&gt;where(&#39;active&#39;, true)</span>
<span class="x">    -&gt;remember(60)</span>
<span class="x">    -&gt;get();</span>

<span class="x">// Cache with tags</span>
<span class="x">$users = DB::table(&#39;users&#39;)</span>
<span class="x">    -&gt;where(&#39;active&#39;, true)</span>
<span class="x">    -&gt;remember(60, &#39;users.active&#39;)</span>
<span class="x">    -&gt;get();</span>
</code></pre></div>

<h3 id="cache-eloquent-queries">Cache Eloquent Queries</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Cache Eloquent queries</span>
<span class="x">$users = User::where(&#39;active&#39;, true)</span>
<span class="x">    -&gt;remember(60)</span>
<span class="x">    -&gt;get();</span>

<span class="x">// Cache with relationships</span>
<span class="x">$users = User::with(&#39;posts&#39;)</span>
<span class="x">    -&gt;where(&#39;active&#39;, true)</span>
<span class="x">    -&gt;remember(60, &#39;users.with_posts&#39;)</span>
<span class="x">    -&gt;get();</span>
</code></pre></div>

<h2 id="cache-events">Cache Events</h2>
<h3 id="listen-to-cache-events">Listen to Cache Events</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// In EventServiceProvider</span>
<span class="x">protected $listen = [</span>
<span class="x">    &#39;Illuminate\Cache\Events\CacheHit&#39; =&gt; [</span>
<span class="x">        &#39;App\Listeners\LogCacheHit&#39;,</span>
<span class="x">    ],</span>
<span class="x">    &#39;Illuminate\Cache\Events\CacheMissed&#39; =&gt; [</span>
<span class="x">        &#39;App\Listeners\LogCacheMissed&#39;,</span>
<span class="x">    ],</span>
<span class="x">    &#39;Illuminate\Cache\Events\KeyForgotten&#39; =&gt; [</span>
<span class="x">        &#39;App\Listeners\LogCacheForgotten&#39;,</span>
<span class="x">    ],</span>
<span class="x">    &#39;Illuminate\Cache\Events\KeyWritten&#39; =&gt; [</span>
<span class="x">        &#39;App\Listeners\LogCacheWritten&#39;,</span>
<span class="x">    ],</span>
<span class="x">];</span>
</code></pre></div>

<h3 id="custom-cache-events">Custom Cache Events</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Create custom cache events</span>
<span class="x">class CacheCleared</span>
<span class="x">{</span>
<span class="x">    public $tags;</span>

<span class="x">    public function __construct($tags = null)</span>
<span class="x">    {</span>
<span class="x">        $this-&gt;tags = $tags;</span>
<span class="x">    }</span>
<span class="x">}</span>

<span class="x">// Dispatch event</span>
<span class="x">event(new CacheCleared([&#39;users&#39;, &#39;posts&#39;]));</span>
</code></pre></div>

<h2 id="cache-middleware">Cache Middleware</h2>
<h3 id="cache-response-middleware">Cache Response Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Create cache middleware</span>
<span class="x">php artisan make:middleware CacheResponse</span>

<span class="x">class CacheResponse</span>
<span class="x">{</span>
<span class="x">    public function handle($request, Closure $next)</span>
<span class="x">    {</span>
<span class="x">        if ($request-&gt;isMethod(&#39;GET&#39;)) {</span>
<span class="x">            $cacheKey = &#39;page_cache_&#39; . sha1($request-&gt;fullUrl());</span>

<span class="x">            if (Cache::has($cacheKey)) {</span>
<span class="x">                return Cache::get($cacheKey);</span>
<span class="x">            }</span>

<span class="x">            $response = $next($request);</span>

<span class="x">            Cache::put($cacheKey, $response, 3600);</span>

<span class="x">            return $response;</span>
<span class="x">        }</span>

<span class="x">        return $next($request);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h3 id="apply-to-routes">Apply to Routes</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Apply to specific routes</span>
<span class="x">Route::get(&#39;/posts&#39;, [PostController::class, &#39;index&#39;])</span>
<span class="x">    -&gt;middleware(&#39;cache.response&#39;);</span>

<span class="x">// Apply to route groups</span>
<span class="x">Route::middleware([&#39;cache.response&#39;])-&gt;group(function () {</span>
<span class="x">    Route::get(&#39;/posts&#39;, [PostController::class, &#39;index&#39;]);</span>
<span class="x">    Route::get(&#39;/users&#39;, [UserController::class, &#39;index&#39;]);</span>
<span class="x">});</span>
</code></pre></div>

<h2 id="advanced-caching-patterns">Advanced Caching Patterns</h2>
<h3 id="cache-aside-pattern">Cache-Aside Pattern</h3>
<div class="codehilite"><pre><span></span><code><span class="x">class UserService</span>
<span class="x">{</span>
<span class="x">    public function getUser($id)</span>
<span class="x">    {</span>
<span class="x">        return Cache::remember(&quot;user.{$id}&quot;, 3600, function () use ($id) {</span>
<span class="x">            return User::findOrFail($id);</span>
<span class="x">        });</span>
<span class="x">    }</span>

<span class="x">    public function updateUser($id, $data)</span>
<span class="x">    {</span>
<span class="x">        $user = User::findOrFail($id);</span>
<span class="x">        $user-&gt;update($data);</span>

<span class="x">        // Invalidate cache</span>
<span class="x">        Cache::forget(&quot;user.{$id}&quot;);</span>

<span class="x">        return $user;</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h3 id="write-through-pattern">Write-Through Pattern</h3>
<div class="codehilite"><pre><span></span><code><span class="x">class PostService</span>
<span class="x">{</span>
<span class="x">    public function createPost($data)</span>
<span class="x">    {</span>
<span class="x">        $post = Post::create($data);</span>

<span class="x">        // Update cache immediately</span>
<span class="x">        Cache::put(&quot;post.{$post-&gt;id}&quot;, $post, 3600);</span>
<span class="x">        Cache::tags(&#39;posts&#39;)-&gt;flush();</span>

<span class="x">        return $post;</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h3 id="cache-warming">Cache Warming</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Warm up cache on application start</span>
<span class="x">class WarmCache</span>
<span class="x">{</span>
<span class="x">    public function handle()</span>
<span class="x">    {</span>
<span class="x">        // Cache frequently accessed data</span>
<span class="x">        Cache::remember(&#39;popular_posts&#39;, 3600, function () {</span>
<span class="x">            return Post::popular()-&gt;take(10)-&gt;get();</span>
<span class="x">        });</span>

<span class="x">        Cache::remember(&#39;active_users&#39;, 3600, function () {</span>
<span class="x">            return User::active()-&gt;take(50)-&gt;get();</span>
<span class="x">        });</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h2 id="performance-optimization">Performance Optimization</h2>
<h3 id="cache-key-strategies">Cache Key Strategies</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Use descriptive cache keys</span>
<span class="x">Cache::put(&quot;user.{$user-&gt;id}.profile&quot;, $profile, 3600);</span>
<span class="x">Cache::put(&quot;user.{$user-&gt;id}.posts&quot;, $posts, 1800);</span>
<span class="x">Cache::put(&quot;user.{$user-&gt;id}.settings&quot;, $settings, 7200);</span>

<span class="x">// Use versioned cache keys</span>
<span class="x">$version = Cache::get(&#39;users_version&#39;, 1);</span>
<span class="x">Cache::put(&quot;users.v{$version}.all&quot;, $users, 3600);</span>

<span class="x">// Invalidate by incrementing version</span>
<span class="x">Cache::increment(&#39;users_version&#39;);</span>
</code></pre></div>

<h3 id="cache-size-management">Cache Size Management</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Monitor cache size</span>
<span class="x">$size = Cache::get(&#39;cache_size&#39;, 0);</span>
<span class="x">Cache::put(&#39;cache_size&#39;, $size + 1);</span>

<span class="x">// Implement cache size limits</span>
<span class="x">if ($size &gt; 1000) {</span>
<span class="x">    Cache::flush();</span>
<span class="x">    Cache::put(&#39;cache_size&#39;, 0);</span>
<span class="x">}</span>
</code></pre></div>

<h2 id="monitoring-and-debugging">Monitoring and Debugging</h2>
<h3 id="cache-statistics">Cache Statistics</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Get cache statistics</span>
<span class="x">$stats = Cache::getStats();</span>

<span class="x">// Monitor cache hit rate</span>
<span class="x">$hits = Cache::get(&#39;cache_hits&#39;, 0);</span>
<span class="x">$misses = Cache::get(&#39;cache_misses&#39;, 0);</span>
<span class="x">$hitRate = $hits / ($hits + $misses) * 100;</span>
</code></pre></div>

<h3 id="cache-debugging">Cache Debugging</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Enable cache debugging</span>
<span class="x">if (config(&#39;app.debug&#39;)) {</span>
<span class="x">    Cache::put(&#39;debug_key&#39;, &#39;value&#39;, 60);</span>
<span class="x">    Log::info(&#39;Cache debug: &#39; . Cache::get(&#39;debug_key&#39;));</span>
<span class="x">}</span>
</code></pre></div>

<h2 id="best-practices">Best Practices</h2>
<h3 id="1-choose-appropriate-ttl">1. Choose Appropriate TTL</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Short TTL for frequently changing data</span>
<span class="x">Cache::put(&#39;user_session&#39;, $session, 300); // 5 minutes</span>

<span class="x">// Long TTL for static data</span>
<span class="x">Cache::put(&#39;app_config&#39;, $config, 86400); // 24 hours</span>

<span class="x">// No TTL for rarely changing data</span>
<span class="x">Cache::forever(&#39;app_constants&#39;, $constants);</span>
</code></pre></div>

<h3 id="2-use-cache-tags-wisely">2. Use Cache Tags Wisely</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Group related data</span>
<span class="x">Cache::tags([&#39;users&#39;, &#39;profile&#39;])-&gt;put(&quot;user.{$id}&quot;, $user, 3600);</span>
<span class="x">Cache::tags([&#39;users&#39;, &#39;posts&#39;])-&gt;put(&quot;user.{$id}.posts&quot;, $posts, 1800);</span>

<span class="x">// Flush specific groups</span>
<span class="x">Cache::tags(&#39;users&#39;)-&gt;flush(); // Flushes all user-related cache</span>
</code></pre></div>

<h3 id="3-implement-cache-invalidation">3. Implement Cache Invalidation</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Invalidate cache on model changes</span>
<span class="x">class Post extends Model</span>
<span class="x">{</span>
<span class="x">    protected static function boot()</span>
<span class="x">    {</span>
<span class="x">        parent::boot();</span>

<span class="x">        static::saved(function ($post) {</span>
<span class="x">            Cache::tags([&#39;posts&#39;, &quot;user.{$post-&gt;user_id}&quot;])-&gt;flush();</span>
<span class="x">        });</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h3 id="4-monitor-cache-performance">4. Monitor Cache Performance</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Track cache performance</span>
<span class="x">$start = microtime(true);</span>
<span class="x">$data = Cache::get(&#39;key&#39;);</span>
<span class="x">$time = microtime(true) - $start;</span>

<span class="x">if ($time &gt; 0.1) {</span>
<span class="x">    Log::warning(&quot;Slow cache access: {$time}s&quot;);</span>
<span class="x">}</span>
</code></pre></div>

<h2 id="summary">Summary</h2>
<p>Laravel's caching system provides powerful tools for improving application performance:</p>
<ul>
<li><strong>Multiple Cache Drivers</strong>: Choose the right driver for your needs</li>
<li><strong>Cache Tags</strong>: Group and manage related cache items</li>
<li><strong>Model Caching</strong>: Cache database queries and relationships</li>
<li><strong>Route Caching</strong>: Cache routes and configuration</li>
<li><strong>Advanced Patterns</strong>: Implement cache-aside and write-through patterns</li>
<li><strong>Performance Monitoring</strong>: Track and optimize cache usage</li>
</ul>
<p>Understanding and implementing effective caching strategies is crucial for building high-performance Laravel applications.</p>
        </div>
        

                    <!-- Markdown Source Link -->
                    <div class="card mt-4">
                        <div class="card-body text-center">
                            <p class="mb-2">
                                <i class="fas fa-file-markdown text-primary"></i>
                                <strong>View Source:</strong>
                            </p>
                            <a href="../docs/13-caching.md" class="btn btn-outline-primary" target="_blank">
                                <i class="fas fa-external-link-alt"></i> Open Markdown File
                            </a>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between mt-5">
                        <a href="../index.html" class="btn btn-outline-primary">
                            <i class="fas fa-home"></i> Back to Home
                        </a>
                        <div>
                            <a href="12-deployment.html" class="btn btn-outline-secondary me-2"><i class="fas fa-arrow-left"></i> Previous</a>
                            <a href="14-performance.html" class="btn btn-primary">Next <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-4 mt-5">
        <div class="container">
            <p>&copy; 2024 Laravel: From Zero to Production. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="../script.js"></script>
</body>
</html>