<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 08-middleware: Middleware - Laravel: From Zero to Production</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <link href="../styles.css" rel="stylesheet">
    <style>
        .markdown-content {
            line-height: 1.8;
            font-size: 1.1rem;
        }
        .markdown-content h1 {
            color: #ff2d20;
            border-bottom: 3px solid #ff2d20;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        .markdown-content h2 {
            color: #636b6f;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        .markdown-content h3 {
            color: #495057;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .markdown-content h4 {
            color: #6c757d;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        .markdown-content p {
            margin-bottom: 1.2rem;
        }
        .markdown-content ul, .markdown-content ol {
            margin-bottom: 1.5rem;
            padding-left: 2rem;
        }
        .markdown-content li {
            margin-bottom: 0.5rem;
        }
        .markdown-content code {
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        .markdown-content pre {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            margin: 20px 0;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
            border-radius: 0;
        }
        .markdown-content blockquote {
            border-left: 4px solid #ff2d20;
            margin: 20px 0;
            padding: 15px 20px;
            background-color: #f8f9fa;
            font-style: italic;
        }
        .markdown-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        .markdown-content th, .markdown-content td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .markdown-content th {
            background-color: #ff2d20;
            color: white;
            font-weight: bold;
        }
        .markdown-content tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .markdown-content strong {
            font-weight: 600;
            color: #495057;
        }
        .markdown-content em {
            color: #6c757d;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">
                <i class="fab fa-laravel"></i> Laravel Book
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#chapters">Chapters</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#projects">Projects</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Chapter Content -->
    <div class="container mt-5 pt-5">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="../index.html">Home</a></li>
                        <li class="breadcrumb-item"><a href="../index.html#chapters">Chapters</a></li>
                        <li class="breadcrumb-item active">Chapter 08-middleware: Middleware</li>
                    </ol>
                </nav>

                <article class="chapter-content">
                    <h1 class="display-4 text-gradient mb-4">
                        <i class="fas fa-filter"></i> Chapter 08-middleware: Middleware
                    </h1>
                    
                    
        <div class="markdown-content">
            <h1 id="chapter-8-middleware">Chapter 8: Middleware</h1>
<h2 id="what-is-middleware">What is Middleware?</h2>
<p>Middleware provides a mechanism for filtering HTTP requests entering your application. Middleware can be used for a variety of tasks such as authentication, logging, CORS, and more. Each middleware handles a specific concern and can be applied to routes, route groups, or globally.</p>
<h2 id="how-middleware-works">How Middleware Works</h2>
<p>Middleware acts as a layer between the HTTP request and your application. When a request comes in, it passes through middleware in the order they are defined. Each middleware can:</p>
<ol>
<li><strong>Modify the request</strong> before it reaches your application</li>
<li><strong>Modify the response</strong> before it's sent back to the client</li>
<li><strong>Terminate the request</strong> early (e.g., redirect or return an error)</li>
<li><strong>Pass the request</strong> to the next middleware</li>
</ol>
<h2 id="built-in-middleware">Built-in Middleware</h2>
<p>Laravel comes with several built-in middleware:</p>
<h3 id="authentication-middleware">Authentication Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Check if user is authenticated</span>
<span class="x">Route::get(&#39;/profile&#39;, function () {</span>
<span class="x">    // Only authenticated users can access this</span>
<span class="x">})-&gt;middleware(&#39;auth&#39;);</span>

<span class="x">// Check if user is authenticated and email is verified</span>
<span class="x">Route::get(&#39;/settings&#39;, function () {</span>
<span class="x">    // Only verified users can access this</span>
<span class="x">})-&gt;middleware([&#39;auth&#39;, &#39;verified&#39;]);</span>

<span class="x">// Check if user is authenticated and has specific guard</span>
<span class="x">Route::get(&#39;/admin&#39;, function () {</span>
<span class="x">    // Only admin guard users can access this</span>
<span class="x">})-&gt;middleware(&#39;auth:admin&#39;);</span>
</code></pre></div>

<h3 id="csrf-protection">CSRF Protection</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// CSRF protection is automatically applied to web routes</span>
<span class="x">Route::post(&#39;/users&#39;, function () {</span>
<span class="x">    // CSRF token is automatically validated</span>
<span class="x">});</span>
</code></pre></div>

<h3 id="rate-limiting">Rate Limiting</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Limit requests to 60 per minute</span>
<span class="x">Route::get(&#39;/api/users&#39;, function () {</span>
<span class="x">    // Rate limited to 60 requests per minute</span>
<span class="x">})-&gt;middleware(&#39;throttle:60,1&#39;);</span>

<span class="x">// Limit requests with custom key</span>
<span class="x">Route::get(&#39;/api/users&#39;, function () {</span>
<span class="x">    // Rate limited by user ID</span>
<span class="x">})-&gt;middleware(&#39;throttle:60,1&#39;)-&gt;middleware(&#39;throttle:60,1,user_id&#39;);</span>
</code></pre></div>

<h3 id="cors-middleware">CORS Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Handle CORS for API routes</span>
<span class="x">Route::middleware(&#39;cors&#39;)-&gt;group(function () {</span>
<span class="x">    Route::get(&#39;/api/users&#39;, function () {</span>
<span class="x">        // CORS headers are automatically added</span>
<span class="x">    });</span>
<span class="x">});</span>
</code></pre></div>

<h2 id="creating-custom-middleware">Creating Custom Middleware</h2>
<h3 id="using-artisan-command">Using Artisan Command</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Create middleware</span>
php<span class="w"> </span>artisan<span class="w"> </span>make:middleware<span class="w"> </span>CheckAge

<span class="c1"># Create middleware with specific path</span>
php<span class="w"> </span>artisan<span class="w"> </span>make:middleware<span class="w"> </span>AdminMiddleware
</code></pre></div>

<h3 id="basic-middleware-structure">Basic Middleware Structure</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CheckAge</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Handle an incoming request.</span>
<span class="sd">     *</span>
<span class="sd">     * @param  \Closure(\Illuminate\Http\Request): (\Symfony\Component\HttpFoundation\Response)  $next</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">,</span> <span class="nv">$minimumAge</span> <span class="o">=</span> <span class="mi">18</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">age</span> <span class="o">&lt;</span> <span class="nv">$minimumAge</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;You must be at least &#39;</span> <span class="o">.</span> <span class="nv">$minimumAge</span> <span class="o">.</span> <span class="s1">&#39; years old.&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="middleware-with-parameters">Middleware with Parameters</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CheckRole</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">,</span> <span class="o">...</span><span class="nv">$roles</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span> <span class="o">||</span> <span class="o">!</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">role</span><span class="p">,</span> <span class="nv">$roles</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">abort</span><span class="p">(</span><span class="mi">403</span><span class="p">,</span> <span class="s1">&#39;Unauthorized action.&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="terminating-middleware">Terminating Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">LogRequests</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

        <span class="c1">// Log after response is sent</span>
        <span class="nx">\Log</span><span class="o">::</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;Request processed&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(),</span>
            <span class="s1">&#39;method&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(),</span>
            <span class="s1">&#39;status&#39;</span> <span class="o">=&gt;</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getStatusCode</span><span class="p">(),</span>
        <span class="p">]);</span>

        <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="registering-middleware">Registering Middleware</h2>
<h3 id="global-middleware">Global Middleware</h3>
<p>Register middleware that runs on every request in <code>app/Http/Kernel.php</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="x">protected $middleware = [</span>
<span class="x">    // \App\Http\Middleware\TrustHosts::class,</span>
<span class="x">    \App\Http\Middleware\TrustProxies::class,</span>
<span class="x">    \Illuminate\Http\Middleware\HandleCors::class,</span>
<span class="x">    \App\Http\Middleware\PreventRequestsDuringMaintenance::class,</span>
<span class="x">    \Illuminate\Foundation\Http\Middleware\ValidatePostSize::class,</span>
<span class="x">    \App\Http\Middleware\TrimStrings::class,</span>
<span class="x">    \Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull::class,</span>
<span class="x">    \App\Http\Middleware\LogRequests::class, // Custom middleware</span>
<span class="x">];</span>
</code></pre></div>

<h3 id="route-middleware">Route Middleware</h3>
<p>Register middleware that can be assigned to routes in <code>app/Http/Kernel.php</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="x">protected $routeMiddleware = [</span>
<span class="x">    &#39;auth&#39; =&gt; \App\Http\Middleware\Authenticate::class,</span>
<span class="x">    &#39;auth.basic&#39; =&gt; \Illuminate\Auth\Middleware\AuthenticateWithBasicAuth::class,</span>
<span class="x">    &#39;auth.session&#39; =&gt; \Illuminate\Session\Middleware\AuthenticateSession::class,</span>
<span class="x">    &#39;cache.headers&#39; =&gt; \Illuminate\Http\Middleware\SetCacheHeaders::class,</span>
<span class="x">    &#39;can&#39; =&gt; \Illuminate\Auth\Middleware\Authorize::class,</span>
<span class="x">    &#39;guest&#39; =&gt; \App\Http\Middleware\RedirectIfAuthenticated::class,</span>
<span class="x">    &#39;password.confirm&#39; =&gt; \Illuminate\Auth\Middleware\RequirePassword::class,</span>
<span class="x">    &#39;precognitive&#39; =&gt; \Illuminate\Foundation\Http\Middleware\HandlePrecognitiveRequests::class,</span>
<span class="x">    &#39;signed&#39; =&gt; \App\Http\Middleware\ValidateSignature::class,</span>
<span class="x">    &#39;throttle&#39; =&gt; \Illuminate\Routing\Middleware\ThrottleRequests::class,</span>
<span class="x">    &#39;verified&#39; =&gt; \Illuminate\Auth\Middleware\EnsureEmailIsVerified::class,</span>
<span class="x">    &#39;check.age&#39; =&gt; \App\Http\Middleware\CheckAge::class, // Custom middleware</span>
<span class="x">    &#39;check.role&#39; =&gt; \App\Http\Middleware\CheckRole::class, // Custom middleware</span>
<span class="x">];</span>
</code></pre></div>

<h3 id="middleware-groups">Middleware Groups</h3>
<p>Group related middleware in <code>app/Http/Kernel.php</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="x">protected $middlewareGroups = [</span>
<span class="x">    &#39;web&#39; =&gt; [</span>
<span class="x">        \App\Http\Middleware\EncryptCookies::class,</span>
<span class="x">        \Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse::class,</span>
<span class="x">        \Illuminate\Session\Middleware\StartSession::class,</span>
<span class="x">        \Illuminate\View\Middleware\ShareErrorsFromSession::class,</span>
<span class="x">        \App\Http\Middleware\VerifyCsrfToken::class,</span>
<span class="x">        \Illuminate\Routing\Middleware\SubstituteBindings::class,</span>
<span class="x">    ],</span>

<span class="x">    &#39;api&#39; =&gt; [</span>
<span class="x">        \Illuminate\Routing\Middleware\ThrottleRequests::class.&#39;:api&#39;,</span>
<span class="x">        \Illuminate\Routing\Middleware\SubstituteBindings::class,</span>
<span class="x">    ],</span>

<span class="x">    &#39;admin&#39; =&gt; [</span>
<span class="x">        &#39;auth&#39;,</span>
<span class="x">        &#39;check.role:admin&#39;,</span>
<span class="x">        \App\Http\Middleware\LogAdminActions::class,</span>
<span class="x">    ],</span>
<span class="x">];</span>
</code></pre></div>

<h2 id="applying-middleware">Applying Middleware</h2>
<h3 id="to-individual-routes">To Individual Routes</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Single middleware</span>
<span class="x">Route::get(&#39;/profile&#39;, function () {</span>
<span class="x">    return view(&#39;profile&#39;);</span>
<span class="x">})-&gt;middleware(&#39;auth&#39;);</span>

<span class="x">// Multiple middleware</span>
<span class="x">Route::get(&#39;/admin/users&#39;, function () {</span>
<span class="x">    return view(&#39;admin.users&#39;);</span>
<span class="x">})-&gt;middleware([&#39;auth&#39;, &#39;check.role:admin&#39;]);</span>

<span class="x">// Middleware with parameters</span>
<span class="x">Route::get(&#39;/adult-content&#39;, function () {</span>
<span class="x">    return view(&#39;adult.content&#39;);</span>
<span class="x">})-&gt;middleware(&#39;check.age:21&#39;);</span>
</code></pre></div>

<h3 id="to-route-groups">To Route Groups</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Apply middleware to group</span>
<span class="x">Route::middleware([&#39;auth&#39;, &#39;verified&#39;])-&gt;group(function () {</span>
<span class="x">    Route::get(&#39;/profile&#39;, function () {</span>
<span class="x">        return view(&#39;profile&#39;);</span>
<span class="x">    });</span>

<span class="x">    Route::get(&#39;/settings&#39;, function () {</span>
<span class="x">        return view(&#39;settings&#39;);</span>
<span class="x">    });</span>
<span class="x">});</span>

<span class="x">// Apply middleware group</span>
<span class="x">Route::middleware(&#39;admin&#39;)-&gt;group(function () {</span>
<span class="x">    Route::get(&#39;/admin/dashboard&#39;, function () {</span>
<span class="x">        return view(&#39;admin.dashboard&#39;);</span>
<span class="x">    });</span>

<span class="x">    Route::get(&#39;/admin/users&#39;, function () {</span>
<span class="x">        return view(&#39;admin.users&#39;);</span>
<span class="x">    });</span>
<span class="x">});</span>
</code></pre></div>

<h3 id="to-controllers">To Controllers</h3>
<div class="codehilite"><pre><span></span><code><span class="x">class UserController extends Controller</span>
<span class="x">{</span>
<span class="x">    public function __construct()</span>
<span class="x">    {</span>
<span class="x">        $this-&gt;middleware(&#39;auth&#39;);</span>
<span class="x">        $this-&gt;middleware(&#39;check.role:admin&#39;)-&gt;only([&#39;index&#39;, &#39;store&#39;]);</span>
<span class="x">        $this-&gt;middleware(&#39;check.age:18&#39;)-&gt;except([&#39;index&#39;]);</span>
<span class="x">    }</span>

<span class="x">    public function index()</span>
<span class="x">    {</span>
<span class="x">        // Requires auth and admin role</span>
<span class="x">    }</span>

<span class="x">    public function show($id)</span>
<span class="x">    {</span>
<span class="x">        // Requires auth only</span>
<span class="x">    }</span>

<span class="x">    public function store()</span>
<span class="x">    {</span>
<span class="x">        // Requires auth and admin role</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h3 id="conditional-middleware">Conditional Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="x">class UserController extends Controller</span>
<span class="x">{</span>
<span class="x">    public function __construct()</span>
<span class="x">    {</span>
<span class="x">        $this-&gt;middleware(&#39;auth&#39;)-&gt;only([&#39;profile&#39;, &#39;settings&#39;]);</span>
<span class="x">        $this-&gt;middleware(&#39;check.role:admin&#39;)-&gt;when(function ($request) {</span>
<span class="x">            return $request-&gt;is(&#39;admin/*&#39;);</span>
<span class="x">        });</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h2 id="common-middleware-examples">Common Middleware Examples</h2>
<h3 id="authentication-middleware_1">Authentication Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">EnsureUserIsSubscribed</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">subscribed</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">redirect</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="s1">&#39;subscription.create&#39;</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">with</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="s1">&#39;You need an active subscription to access this feature.&#39;</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="logging-middleware">Logging Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">LogUserActivity</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">\Log</span><span class="o">::</span><span class="na">info</span><span class="p">(</span><span class="s1">&#39;User activity&#39;</span><span class="p">,</span> <span class="p">[</span>
                <span class="s1">&#39;user_id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">,</span>
                <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">(),</span>
                <span class="s1">&#39;method&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">(),</span>
                <span class="s1">&#39;ip&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">ip</span><span class="p">(),</span>
                <span class="s1">&#39;user_agent&#39;</span> <span class="o">=&gt;</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">userAgent</span><span class="p">(),</span>
            <span class="p">]);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="maintenance-mode-middleware">Maintenance Mode Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MaintenanceMode</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">isDownForMaintenance</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">?-&gt;</span><span class="na">isAdmin</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">view</span><span class="p">(</span><span class="s1">&#39;maintenance&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="mi">503</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="api-rate-limiting-middleware">API Rate Limiting Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Middleware</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Closure</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Cache\RateLimiter</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span> <span class="k">as</span> <span class="nx">HttpResponse</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ApiRateLimit</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$limiter</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">RateLimiter</span> <span class="nv">$limiter</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">limiter</span> <span class="o">=</span> <span class="nv">$limiter</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">Closure</span> <span class="nv">$next</span><span class="p">,</span> <span class="nv">$maxAttempts</span> <span class="o">=</span> <span class="mi">60</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="nv">$key</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">resolveRequestSignature</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">limiter</span><span class="o">-&gt;</span><span class="na">tooManyAttempts</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$maxAttempts</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">buildResponse</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$maxAttempts</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">limiter</span><span class="o">-&gt;</span><span class="na">hit</span><span class="p">(</span><span class="nv">$key</span><span class="p">);</span>

        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$next</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addHeaders</span><span class="p">(</span>
            <span class="nv">$response</span><span class="p">,</span> <span class="nv">$maxAttempts</span><span class="p">,</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">calculateRemainingAttempts</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$maxAttempts</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">resolveRequestSignature</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">sha1</span><span class="p">(</span><span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">()</span><span class="o">?-&gt;</span><span class="na">id</span> <span class="o">??</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">ip</span><span class="p">(),</span>
            <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">()</span><span class="o">?-&gt;</span><span class="na">getDomain</span><span class="p">()</span> <span class="o">??</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getHost</span><span class="p">(),</span>
        <span class="p">]));</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">buildResponse</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$key</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$maxAttempts</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="nv">$retryAfter</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">limiter</span><span class="o">-&gt;</span><span class="na">availableIn</span><span class="p">(</span><span class="nv">$key</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">response</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">json</span><span class="p">([</span>
            <span class="s1">&#39;error&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Too many requests.&#39;</span><span class="p">,</span>
            <span class="s1">&#39;retry_after&#39;</span> <span class="o">=&gt;</span> <span class="nv">$retryAfter</span><span class="p">,</span>
        <span class="p">],</span> <span class="mi">429</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">withHeaders</span><span class="p">([</span>
            <span class="s1">&#39;Retry-After&#39;</span> <span class="o">=&gt;</span> <span class="nv">$retryAfter</span><span class="p">,</span>
            <span class="s1">&#39;X-RateLimit-Limit&#39;</span> <span class="o">=&gt;</span> <span class="nv">$maxAttempts</span><span class="p">,</span>
            <span class="s1">&#39;X-RateLimit-Remaining&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">addHeaders</span><span class="p">(</span><span class="nx">Response</span> <span class="nv">$response</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$maxAttempts</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$remainingAttempts</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">withHeaders</span><span class="p">([</span>
            <span class="s1">&#39;X-RateLimit-Limit&#39;</span> <span class="o">=&gt;</span> <span class="nv">$maxAttempts</span><span class="p">,</span>
            <span class="s1">&#39;X-RateLimit-Remaining&#39;</span> <span class="o">=&gt;</span> <span class="nv">$remainingAttempts</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">calculateRemainingAttempts</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$key</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$maxAttempts</span><span class="p">)</span><span class="o">:</span> <span class="nx">int</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$maxAttempts</span> <span class="o">-</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">limiter</span><span class="o">-&gt;</span><span class="na">attempts</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="middleware-best-practices">Middleware Best Practices</h2>
<h3 id="1-keep-middleware-focused">1. Keep Middleware Focused</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Good - Single responsibility</span>
<span class="x">class CheckAge</span>
<span class="x">{</span>
<span class="x">    public function handle(Request $request, Closure $next, $minimumAge = 18): Response</span>
<span class="x">    {</span>
<span class="x">        if ($request-&gt;user()-&gt;age &lt; $minimumAge) {</span>
<span class="x">            return redirect(&#39;home&#39;);</span>
<span class="x">        }</span>
<span class="x">        return $next($request);</span>
<span class="x">    }</span>
<span class="x">}</span>

<span class="x">// Bad - Multiple responsibilities</span>
<span class="x">class CheckAgeAndRoleAndSubscription</span>
<span class="x">{</span>
<span class="x">    public function handle(Request $request, Closure $next): Response</span>
<span class="x">    {</span>
<span class="x">        // Too many checks in one middleware</span>
<span class="x">        if ($request-&gt;user()-&gt;age &lt; 18) {</span>
<span class="x">            return redirect(&#39;home&#39;);</span>
<span class="x">        }</span>
<span class="x">        if ($request-&gt;user()-&gt;role !== &#39;admin&#39;) {</span>
<span class="x">            return redirect(&#39;home&#39;);</span>
<span class="x">        }</span>
<span class="x">        if (!$request-&gt;user()-&gt;subscribed()) {</span>
<span class="x">            return redirect(&#39;subscription&#39;);</span>
<span class="x">        }</span>
<span class="x">        return $next($request);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h3 id="2-use-descriptive-names">2. Use Descriptive Names</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// Good</span>
<span class="x">&#39;check.age&#39; =&gt; \App\Http\Middleware\CheckAge::class,</span>
<span class="x">&#39;ensure.subscribed&#39; =&gt; \App\Http\Middleware\EnsureUserIsSubscribed::class,</span>
<span class="x">&#39;log.activity&#39; =&gt; \App\Http\Middleware\LogUserActivity::class,</span>

<span class="x">// Bad</span>
<span class="x">&#39;middleware1&#39; =&gt; \App\Http\Middleware\Middleware1::class,</span>
<span class="x">&#39;check&#39; =&gt; \App\Http\Middleware\Check::class,</span>
</code></pre></div>

<h3 id="3-handle-errors-gracefully">3. Handle Errors Gracefully</h3>
<div class="codehilite"><pre><span></span><code><span class="x">class CheckRole</span>
<span class="x">{</span>
<span class="x">    public function handle(Request $request, Closure $next, ...$roles): Response</span>
<span class="x">    {</span>
<span class="x">        if (!$request-&gt;user()) {</span>
<span class="x">            return redirect()-&gt;route(&#39;login&#39;);</span>
<span class="x">        }</span>

<span class="x">        if (!in_array($request-&gt;user()-&gt;role, $roles)) {</span>
<span class="x">            abort(403, &#39;You do not have permission to access this resource.&#39;);</span>
<span class="x">        }</span>

<span class="x">        return $next($request);</span>
<span class="x">    }</span>
<span class="x">}</span>
</code></pre></div>

<h3 id="4-use-middleware-groups-for-common-patterns">4. Use Middleware Groups for Common Patterns</h3>
<div class="codehilite"><pre><span></span><code><span class="x">// In Kernel.php</span>
<span class="x">protected $middlewareGroups = [</span>
<span class="x">    &#39;web&#39; =&gt; [</span>
<span class="x">        // Web-specific middleware</span>
<span class="x">    ],</span>
<span class="x">    &#39;api&#39; =&gt; [</span>
<span class="x">        // API-specific middleware</span>
<span class="x">    ],</span>
<span class="x">    &#39;admin&#39; =&gt; [</span>
<span class="x">        &#39;auth&#39;,</span>
<span class="x">        &#39;check.role:admin&#39;,</span>
<span class="x">        &#39;log.activity&#39;,</span>
<span class="x">    ],</span>
<span class="x">    &#39;premium&#39; =&gt; [</span>
<span class="x">        &#39;auth&#39;,</span>
<span class="x">        &#39;ensure.subscribed&#39;,</span>
<span class="x">        &#39;check.role:premium&#39;,</span>
<span class="x">    ],</span>
<span class="x">];</span>
</code></pre></div>

<h3 id="5-test-your-middleware">5. Test Your Middleware</h3>
<div class="codehilite"><pre><span></span><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">Tests\Feature</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Tests\TestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Http\Middleware\CheckAge</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CheckAgeMiddlewareTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">test_middleware_allows_users_above_minimum_age</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$middleware</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CheckAge</span><span class="p">();</span>
        <span class="nv">$request</span> <span class="o">=</span> <span class="nx">Request</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;/test&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">);</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setUserResolver</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">[</span><span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">25</span><span class="p">];</span>
        <span class="p">});</span>

        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$middleware</span><span class="o">-&gt;</span><span class="na">handle</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">(</span><span class="s1">&#39;OK&#39;</span><span class="p">);</span>
        <span class="p">},</span> <span class="mi">18</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="s1">&#39;OK&#39;</span><span class="p">,</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getContent</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">test_middleware_redirects_users_below_minimum_age</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$middleware</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CheckAge</span><span class="p">();</span>
        <span class="nv">$request</span> <span class="o">=</span> <span class="nx">Request</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;/test&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">);</span>
        <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setUserResolver</span><span class="p">(</span><span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">[</span><span class="s1">&#39;age&#39;</span> <span class="o">=&gt;</span> <span class="mi">16</span><span class="p">];</span>
        <span class="p">});</span>

        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$middleware</span><span class="o">-&gt;</span><span class="na">handle</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">response</span><span class="p">(</span><span class="s1">&#39;OK&#39;</span><span class="p">);</span>
        <span class="p">},</span> <span class="mi">18</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">302</span><span class="p">,</span> <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getStatusCode</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h2 id="summary">Summary</h2>
<p>In this chapter, we covered:</p>
<ul>
<li>✅ Understanding middleware and how it works</li>
<li>✅ Built-in Laravel middleware</li>
<li>✅ Creating custom middleware</li>
<li>✅ Registering and applying middleware</li>
<li>✅ Middleware groups and conditional middleware</li>
<li>✅ Common middleware examples</li>
<li>✅ Best practices for writing middleware</li>
<li>✅ Testing middleware</li>
</ul>
<p>Middleware provides a powerful way to filter and modify HTTP requests in your Laravel application. In the next chapter, we'll explore authentication and authorization.</p>
        </div>
        

                    <!-- Markdown Source Link -->
                    <div class="card mt-4">
                        <div class="card-body text-center">
                            <p class="mb-2">
                                <i class="fas fa-file-markdown text-primary"></i>
                                <strong>View Source:</strong>
                            </p>
                            <a href="../docs/08-middleware.md" class="btn btn-outline-primary" target="_blank">
                                <i class="fas fa-external-link-alt"></i> Open Markdown File
                            </a>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between mt-5">
                        <a href="../index.html" class="btn btn-outline-primary">
                            <i class="fas fa-home"></i> Back to Home
                        </a>
                        <div>
                            <a href="07-migrations.html" class="btn btn-outline-secondary me-2"><i class="fas fa-arrow-left"></i> Previous</a>
                            <a href="09-auth.html" class="btn btn-primary">Next <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-4 mt-5">
        <div class="container">
            <p>&copy; 2024 Laravel: From Zero to Production. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="../script.js"></script>
</body>
</html>